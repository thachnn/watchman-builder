diff --git a/CMake/FollyCompilerUnix.cmake b/CMake/FollyCompilerUnix.cmake
index 8dcaf14..ecb252a 100644
--- a/CMake/FollyCompilerUnix.cmake
+++ b/CMake/FollyCompilerUnix.cmake
@@ -28,7 +28,7 @@ set(
 )
 mark_as_advanced(CXX_STD)
 
-set(CMAKE_CXX_FLAGS_COMMON "-g -Wall -Wextra")
+set(CMAKE_CXX_FLAGS_COMMON "-Wall -Wextra")
 set(CMAKE_CXX_FLAGS_DEBUG "${CMAKE_CXX_FLAGS_DEBUG} ${CMAKE_CXX_FLAGS_COMMON}")
 set(CMAKE_CXX_FLAGS_RELEASE "${CMAKE_CXX_FLAGS_RELEASE} ${CMAKE_CXX_FLAGS_COMMON} -O3")
 
@@ -43,7 +43,6 @@ function(apply_folly_compile_options_to_target THETARGET)
   )
   target_compile_options(${THETARGET}
     PRIVATE
-      -g
       -std=${CXX_STD}
       -finput-charset=UTF-8
       -fsigned-char
diff --git a/CMake/folly-deps.cmake b/CMake/folly-deps.cmake
index a0479e6..f404f83 100644
--- a/CMake/folly-deps.cmake
+++ b/CMake/folly-deps.cmake
@@ -70,6 +70,9 @@ find_package(LibEvent MODULE REQUIRED)
 list(APPEND FOLLY_LINK_LIBRARIES ${LIBEVENT_LIB})
 list(APPEND FOLLY_INCLUDE_DIRECTORIES ${LIBEVENT_INCLUDE_DIR})
 
+set(FOLLY_ORIGINAL_CMAKE_REQUIRED_FLAGS "${CMAKE_REQUIRED_FLAGS}")
+string(REGEX REPLACE " -std=[^ ]*" "" CMAKE_REQUIRED_FLAGS "${CMAKE_REQUIRED_FLAGS}")
+
 find_package(ZLIB MODULE)
 set(FOLLY_HAVE_LIBZ ${ZLIB_FOUND})
 if (ZLIB_FOUND)
@@ -104,6 +107,8 @@ if (LIBLZMA_FOUND)
   list(APPEND FOLLY_LINK_LIBRARIES ${LIBLZMA_LIBRARIES})
 endif()
 
+set(CMAKE_REQUIRED_FLAGS "${FOLLY_ORIGINAL_CMAKE_REQUIRED_FLAGS}")
+
 find_package(LZ4 MODULE)
 set(FOLLY_HAVE_LIBLZ4 ${LZ4_FOUND})
 if (LZ4_FOUND)
diff --git a/CMake/libfolly.pc.in b/CMake/libfolly.pc.in
index ffa043c..039a102 100644
--- a/CMake/libfolly.pc.in
+++ b/CMake/libfolly.pc.in
@@ -1,5 +1,5 @@
 prefix=@CMAKE_INSTALL_PREFIX@
-exec_prefix=@CMAKE_INSTALL_PREFIX@
+exec_prefix=${prefix}
 libdir=${exec_prefix}/@CMAKE_INSTALL_LIBDIR@
 includedir=${prefix}/@CMAKE_INSTALL_INCLUDEDIR@
 
diff --git a/folly/io/async/test/EventBaseTestLib.h b/folly/io/async/test/EventBaseTestLib.h
index da24844..4b99f60 100644
--- a/folly/io/async/test/EventBaseTestLib.h
+++ b/folly/io/async/test/EventBaseTestLib.h
@@ -2235,7 +2235,7 @@ TYPED_TEST_P(EventBaseTest1, DrivableExecutorTest) {
   folly::EventBase& base = *eventBasePtr;
   bool finished = false;
 
-  Baton baton;
+  Baton<> baton;
 
   std::thread t([&] {
     baton.wait();
diff --git a/folly/test/MemoryTest.cpp b/folly/test/MemoryTest.cpp
index f2f3c0a..c26d3ec 100644
--- a/folly/test/MemoryTest.cpp
+++ b/folly/test/MemoryTest.cpp
@@ -87,7 +87,7 @@ TEST(make_unique, compatible_with_std_make_unique) {
 }
 
 TEST(to_shared_ptr_aliasing, example) {
-  auto sp = folly::copy_to_shared_ptr(std::tuple{3, 4});
+  auto sp = folly::copy_to_shared_ptr(std::tuple<int, int>{3, 4});
   auto a = folly::to_shared_ptr_aliasing(sp, &std::get<1>(*sp));
   EXPECT_EQ(4, *a);
 }
diff --git a/folly/test/TraitsTest.cpp b/folly/test/TraitsTest.cpp
index fd6e6d6..f435677 100644
--- a/folly/test/TraitsTest.cpp
+++ b/folly/test/TraitsTest.cpp
@@ -109,8 +109,10 @@ TEST(Traits, conditional) {
 
   EXPECT_TRUE(Cond<false>::fun_std("hello"));
   EXPECT_TRUE(Cond<true>::fun_std("hello"));
+#if __cplusplus >= 201703L
   EXPECT_TRUE(Cond<false>::fun_folly("hello"));
   EXPECT_FALSE(Cond<true>::fun_folly("hello"));
+#endif
 }
 
 TEST(Trait, logicOperators) {
